<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="generator" content="pandoc">
    <title>Software Carpentry: 데이터 사이언스 운영체제 - tidyverse</title>
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap/bootstrap-theme.css" />
    <link rel="stylesheet" type="text/css" href="css/swc.css" />
    <link rel="alternate" type="application/rss+xml" title="Software Carpentry Blog" href="http://software-carpentry.org/feed.xml"/>
    <meta charset="UTF-8" />
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="https://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    
    <!--
    <div id="google_translate_element"></div><script type="text/javascript">
    function googleTranslateElementInit() {
      new google.translate.TranslateElement({pageLanguage: 'ko', includedLanguages: 'en', layout: google.translate.TranslateElement.InlineLayout.SIMPLE}, 'google_translate_element');
    }
    </script><script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
    -->
  </head>
  <body class="lesson">
    <div class="container card">
      <div class="banner">
        <a href="http://software-carpentry.org" title="Software Carpentry">
          <img alt="Software Carpentry banner" src="img/software-carpentry-banner.png" />
        </a>
      </div>
      <article>
      <div class="row">
        <div class="col-md-10 col-md-offset-1">
                    <a href="index.html"><h1 class="title">데이터 사이언스 운영체제 - <code>tidyverse</code></h1></a>
          <h2 class="subtitle"><a href="http://www.kss.or.kr/">한국통계학회 소식지</a> 2019년 10월호</h2>
          <h2 id="data-science-paradigm">소프트웨어 패러다임의 변화 <a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a></h2>
<p>결국 데이터를 다루는 것도 소프트웨어 코딩을 통해서만 가능하기 때문에 현재 통계학, 데이터 사이언스에서 소프트웨어를 따로 떼어내고 논의를 진행하는 것은 불가능에 가깝게 되었고, 향후를 내다봐도 그 중요성이 커지면 커졌지 더 작아질 것으로 보여지지는 않는다.</p>
<p>마이크로소프트 창업자 빌 게이츠가 소프트웨어 상업화 모델로 큰 성공을 거두면서 기존 IBM이 만들어 놓았던 생태계가 크게 변화하였지만, 지나친 소프트웨어 상업화에 대한 반발과 리차드 스톨만이 씨를 뿌리고 리누스 토발즈가 튼튼한 뿌리를 내린 리눅스 운영체제와 인터넷의 보급으로 오픈소스 소프트웨어에 대한 확산, 개방과 공유를 가치로하는 개발자 특유의 문화로 이제 대세는 오픈소스 소프트웨어가 되었다. 이러한 소프트웨어에 대한 인식에 대한 전환은 <a href="https://www.gnu.org/gnu/manifesto.html">GNU 선언문</a>에 잘 표현되어 있다.</p>
<p>데이터를 많이 다루는 통계학도 소프트웨어 패러다임의 변화에 맞춰 진화해 왔다. SAS/SPSS/미니탭으로 대표되는 통계 팩키지와 가우스/매트랩/매스매티카를 위시한 고급 상용 소프트웨어가 한 시대를 풍미했다면, 이제는 R과 파이썬으로 대표되는 오픈소스 소프트웨어가 빈자리를 급격히 채워나가고 있다. 이러한 변화를 직감했던지 해들리 위컴은 2017년 11월 13일 Tidyverse 선언문(Tidy Tools Manifesto)을 직접 작성하여 웹사이트에 공개하였다.</p>
<h2 id="data-science-process-tidyverse">깔끔한 데이터 사이언스 세상</h2>
<p>해드리 위컴이 주장한 <code>tidyverse</code>(타이디버스, 깔끔한 세상)를 이해하기 위해서 필히 <strong>유닉스 철학(Unix Philosophy)</strong>에 대한 기본 지식이 필요하다. 세상의 유일한 운영체제는 누구나 유닉스를 꼽고 있다. 사실 유닉스를 포크(fork) 떠서 만든 것이 마이크로소프트의 윈도우즈 운영체제다. 따라서, 사용방식에는 다소 차이가 있을 수 있지만, 그 이면에 운영체제의 제작 및 소프트웨어 설계 및 구현에 있어서는 크게 다름이 없다. 초기 유닉스 운영체제 개발자들은 모듈 방식과 재사용성의 개념을 적극 도입하였고, 이를 소프트웨어 개발에 대한 문화적 규범이자 철학적 접근으로 통칭하여 유닉스 철학이라고 부르게 되었다.</p>
<p>엉망진창인 R 도구상자(<code>messyverse</code>)와 비교를 하기도 하지만, <code>tidyverse</code>는 팩키지라기 보다는 유닉스 철학처럼 데이터 사이언스에 있어 하나의 철학적 지침으로 접근하는 것이 일반적이다. 깔끔한 R 도구상자(<code>tidyverse</code>)는 깔끔한(tidy) API에 다음과 같은 4가지 원칙을 제시하고 있다.</p>
<ul>
<li>기존 자료구조를 재사용: Reuse existing data structures.</li>
<li>파이프 연산자로 간단한 함수를 조합: Compose simple functions with the pipe.</li>
<li>함수형 프로그래밍을 적극 사용: Embrace functional programming.</li>
<li>기계가 아닌 인간을 위한 설계: Design for humans.</li>
</ul>
<h2 id="tidyverse-workflow"><code>tidyverse</code> 작업흐름</h2>
<p>이에 <code>tidyverse</code>는 그동안 R 팩키지를 개발하면서 축척된 경험과 노하우를 기반으로 R 설계 원칙을 재정립했다는 평가를 받고 있다.</p>
<p><img src="fig/maso_tidyverse.png" alt="Tidyverse 데이터 사이언스 작업흐름" width="100%" /></p>
<p><code>tidyverse</code>의 핵심적인 내용은 다양한 형태의 데이터를 가져와서 최종 산출물을 사람과 기계와 커뮤니케이션할 수 있는 형태로 제작하는 과정을 추상화한 것으로 이해할 수 있다. 시각화(Visualization)는 데이터에 대한 통찰력(insight)과 탄성, 놀라움을 줄 수 있지만, 확장성(Scalability) 측면에서는 한계가 명확하다. 이유는 사람이 데이터 분석 루프에 포함되기 때문이다. 반대로 모형(Model)은 자동화와 확장성에는 장점이 있지만, 주어진 모형틀안에서만 이뤄지기 때문에 통찰력, 놀라움, 탄성을 주지는 못하는 아쉬움이 있다.</p>
<h2 id="tidyverse-functional-programming">함수형 프로그래밍</h2>
<p>시각화와 모형을 새로 개발하는데 별도 자료구조(data structure)를 다시 창조하는 대신에 가능하면 기존 자료구조를 재사용하는 것을 원칙으로 삼고 있다. <code>ggplot2</code>, <code>dplyr</code>, <code>tidyr</code>을 포함한 대다수 R 팩키지는 칼럼에 변수, 행에 관측점을 갖는 직사각형 형태 데이터셋을 가정하고 있다. 그리고, 일부 팩키지는 특정한 변수 자료형에 집중한다. <code>stringr</code>은 문자열, <code>lubridate</code>는 날짜/시간,<code>forcats</code>는 요인 자료형에 집중하고 있지만 모두 기존 자료구조 재사용을 염두에 두고 있는 것도 사실이다.</p>
<p>파이프 연산자(예를 들어, <code>%&gt;%</code>)로 간단한 함수를 조합하여 시스템 전체의 힘을 극대화시킨다. 복잡한 문제를 해결하는 강력한 전략은 레고 블록처럼 다수의 간단한 조각으로 나누고 이를 조합하는 것이다. 단, 각 조각은 격리되어 쉽게 파악되고, 다른 조각과 조합할 수 있는 표준위에서 성립되어야 된다. <code>tidyverse</code> 밑바탕에는 이런 전략이 파이프 연산자를 통해 구현되어 있다. <code>%&gt;%</code> 연산자를 통해 많은 팩키지에 두루 걸쳐 동작되도록 결합시키려면 함수를 작성할 때 다음 원칙을 준수하고 작성하면 된다.</p>
<ul>
<li>함수를 가능하면 단순하게 작성한다. 일반적으로 각 함수는 한가지 작업을 매우 잘해야 되고, 한 문장으로 함수 존재목적을 기술할 수 있어야 된다.</li>
<li>변형(transformation)과 부작용(side-effect)을 뒤섞지 마라. 함수가 객체를 반환하거나, 부작용을 일으키거나 둘 중 하나만 동작하게 만든다.</li>
<li>함수명은 동사로 작성해야 된다. 하지만, 예외로 허용되는데 함수 다수가 동일한 동사를 사용하는 경우를 들 수 있다. 예를 들어 <code>modify</code>, <code>add</code>, <code>compute</code> 등을 들 수 있다. 이런 경우 반복되는 동사가 중복되지 않도록 명사에 집중한다. <code>ggplot2</code>를 좋은 예로 들 수 있는데, 기존 플롯에 좌표, 점, 범례 등에 거의 모든 함수가 추가하기 때문이다.</li>
</ul>
<p>R은 데이터를 위해 개발된 함수형 언어를 근본에 두고 있지만, 객체지향언어(OOP)나 다른 언어 패러다임과 싸우려고 하지 말고 적극적으로 받아들여라. 이것이 의미하는 바는 다음과 같다.</p>
<ul>
<li>상태불변 객체: 작성된 코드에 대한 추론이 쉬움.</li>
<li>S3, S4 에서 제공하는 제네릭 함수: 상태변형 가능한 상태가 필요하다면, 파이프 내부에서 구현한다.</li>
<li><code>for</code> 루프를 추상화한 도구: <code>apply</code> 함수 가족과 <code>purrr</code> 맵(map) 함수</li>
</ul>
<p>데이터 사이언스에서 병목점으로 문제가 발생되는 곳은 공통적으로 컴퓨터 실행시간(computing time)이 아니라 사람의 생각(thinking time)의 시간이다. 따라서, 함수명을 작성할 때 생각이 잘 연상되는 이름으로 작명하고 시간을 적절히 안분하고, 명시적이며 긴 명칭을 변수명, 함수명, 객체명에 사용하고, 짧은 명칭은 가장 중요한 이름으로 아껴서 사용한다. RStudio 소스 편집기의 자동완성기능을 사용하는 경우 접두어가 접미어보다 중요하다. <code>stringr</code>, <code>xml2</code>, <code>rvest</code> 팩키지를 살펴보면 접두어에 일관된 명칭을 부여한 장점을 알 수 있다.</p>
<p>데이터 사이언스는 어떻게 보면 과거 보험회사에서 처음 시작했다고 해도 과언은 아니다. 사망에 따른 데이터를 모아 사망률 통계표를 만들고 이를 바탕으로 위험에 가격을 매겨 상품을 만들어 오래전부터 사업화하여 우리 곁에 다가왔다는 면에서 지금 많이 회자되는 데이터 사이언스와 별반 차이가 없다.</p>
<p>최근 인기를 얻고 있는 기계학습(Machine Learning)이나 인공지능(AI)과는 별개로 몇년 전부터 RStudio의 하들리 위캠(Hadley Wickham) 박사는 <code>tidyverse</code>을 통해 데이터 사이언스를 새롭게 정의하는 시도를 하였고 많은 호응을 얻고 있다. <code>tidyverse</code>는 수많은 기여자들의 도움을 받아 하들리 위캠이 오랜동안 나름대로의 방식으로 체계화시킨 것을 확대 발전 시킨 것으로 데이터 사이언스를 체계적으로 집대성하였다는 평가를 받고 있다. 특히, 데이터 과학자 및 데이터 실무자에게 큰 도움을 주었으며 어떻게 보면 데이터 사이언스 오픈소스 운동의 커다란 동력으로 받아들여지고 있다.</p>
<p>R 언어 기반의 만개가 넘는 팩키지가 개발되어 활용되다는 점은 긍정적지만, 각자의 설계원칙에 맞춰 제각기 개발되고 손을 바꿔 다른 사람들이 이어 받아 유지보수되면서 초기 세워진 설계원칙과 철학이 많이 무너진 것도 사실이다.</p>
<h1 id="tidy-data">깔끔한 데이터</h1>
<p>데이터를 통해 정보를 추출하고, 인사이트를 도출하기 위해서 시각화를 하고, 데이터를 모형으로 자동화를 하고, 커뮤니케이션을 위한 웹앱을 개발하고 발표 보고서를 작성할 때 꼭 필요한 요소가 깔끔한 데이터(tidy data)다. 깔끔한 데이터는 데이터를 가져와서(ingest), 정제작업과 변형, 모형개발, 시각화, 보고서 작성을 원활히 할 수 있는 데이터를 통칭하며 이 반대가 엉망진창인 데이터(messy data)다.</p>
<p>깔끔한 데이터(Tidy datasets)이 준비되면, 데이터를 조작하고, 모형화하고, 시각화가 용이하다. 또한 깔끔한 데이터는 특정한 구조를 갖추고 있는데 변수 는 열(column)이고, 관측점 은 행(row)이며, 관측단위에 대한 형태 는 테이블(table)로 구성된다.</p>
<p>깔끔한 데이터 원칙은 전산학 코드(Codd) 박사의 관계대수(relational algebra) 와 깊은 관련이 있지만, 통계학 전공자에게 친숙한 언어로 표현된다. 해당 데이터셋에 관측점과 변수를 각각 식별하는 것이 쉽게 생각되지만, 일반적으로 변수와 관측점을 정확하게 정의하는 것이 놀랍게도 어렵다. 따라서, 행과 행보다는 변수간 기능적 관계(functional relationship)를 기술하는 것이 더 쉽다. 또한, 칼럼 그룹집단과 집단보다는 관측점 그룹집단 사이 비교를 하는 것이 더 쉽다.</p>
<p>행, 열, 테이블이 관측점, 변수, 형식에 매칭되는 방식에 따라, 데이터셋이 깔끔하거나 깔끔하지 않은 것으로 나뉜다. <strong>깔끔한 데이터(tidy data)</strong>는 데이터셋의 의미를 구조에 매칭하는 표준적인 방식으로<br />
데이터 분석, 조작, 시각화, 모형 작업을 수월히 진행할 수 있는 데이터다.</p>
<ol style="list-style-type: decimal">
<li>각 변수가 칼럼이 된다.</li>
<li>각 관측점은 행이 된다.</li>
<li>관측 단위에 대한 형태는 테이블로 구성한다.</li>
</ol>
<table>
<thead>
<tr class="header">
<th align="left">저장 구분</th>
<th align="left">의미</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">테이블/파일(table/file)</td>
<td align="left">데이터셋 (dataset)</td>
</tr>
<tr class="even">
<td align="left">행(row)</td>
<td align="left">관측점 (observation)</td>
</tr>
<tr class="odd">
<td align="left">열(column)</td>
<td align="left">변수 (variable)</td>
</tr>
</tbody>
</table>
<p><strong>깔끔하지 않는 데이터(messy data)</strong> 는 위와는 다른 형태의 데이터를 지칭한다. 중요한 것은 컴퓨터 과학에서 말하는 코드 제3 정규형이지만, 통계적 언어로 다시 표현한 것이다.</p>
<p>또한, 깔끔한 데이터는 R같은 벡터화 프로그래밍 언어에 특히 잘 맞는다. 왜냐하면 동일한 관측점에 대한 서로 다른 변수 값이 항상 짝으로 매칭되는 것을 보장하기 때문이다.</p>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p><a href="https://cran.r-project.org/web/packages/tidyverse/vignettes/manifesto.html">Hadley Wickham (2017-11-13), &quot;The tidy tools manifesto&quot;</a><a href="#fnref1">↩</a></p></li>
</ol>
</div>
        </div>
      </div>
      </article>
      <div class="footer">
        <a class="label swc-blue-bg" href="http://software-carpentry.org">Software Carpentry</a>
        <a class="label swc-blue-bg" href="https://github.com/swcarpentry/lesson-template">Source</a>
        <a class="label swc-blue-bg" href="mailto:admin@software-carpentry.org">Contact</a>
        <a class="label swc-blue-bg" href="LICENSE.html">License</a>
      </div>
    </div>
    <!-- Javascript placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="css/bootstrap/bootstrap-js/bootstrap.js"></script>
    <script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    
      ga('create', 'UA-37305346-2', 'auto');
      ga('send', 'pageview');
    
    </script>
  </body>
</html>
